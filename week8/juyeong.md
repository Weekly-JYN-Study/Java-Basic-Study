

# 스트림과 병렬처리

## 16.1 스트림 소개
> 스트림은 컬렉션(배열 포함)의 저장 요소를 하나씩 참조해서 람다식으로 처리할 수 있게 해주는 '반복자'

스트림 이전에는 List<String> 컬렉션에서 값을 하나씩 뽑기 위해 Iterator 반복자 사용
스트림 이후로는 list.stream();, stream.forEach를 사용

	```java
	List<String> list = Arrays.asList("주영", "예나");
	Iterator<String> Iterator = list.iterator();
	while(interator.hasNext()) {
    String name = Iterator.next();
    system.out.println(name)
	}
	```

이 코드를 스트림을 사용하면

	```java
	List<String> list = Arrays.asList("주영", "예나");
	Stream<String> stream = list.stream();
	stream.forEach (name -> System.out.println(name));
	```

	1. stream() 메소드로 스트림 객체를 얻고
	2. 포 이치 메소드를 통해 컬렉션 요소를 하나씩 시스아웃한다.

이 때 forEach 메소드는 Consumer 함수적 타입 매개값을 가지므로 람다식으로 표기할 수 있다.
(람다식 Consumer 타입 보면 이해갈 듯! 책으로 치면 P689)

> void forEach(Consumer<T> action)

### 스트림의 특징
Iterator와 비슷하지만 어떤 이점이 있어 쓰는걸까?

1. 람다식으로 처리할 수 있다
2. 내부 반복자를 사용하여 병렬처리 쉬움
3. 중간처리, 최종처리 작업을 수행함

이 세가지 차이가 있다.

1. 람다식으로 처리
   
말 그대로 처리를 람다식을 이용하여 할 수 있다.
스트림이 제공하는 대부분의 요소 처리 메소드는 함수적 인터페이스 매개 타입을 가지기 때문에
람다식 또는 메소드 참조를 이용하여 요소 처리 내용을 매개값으로 전달할 수 있다. 
(P.784 코드 참조)


2. 내부 반복자를 사용하므로 병렬처리가 쉽다.
   
외부 반복자는 개발자가 코드로 직접 컬렉션 요소를 반복해서 가져오는 코드다.
index를 사용한 for문, Iterator를 사용한 while문이 여기에 해당한다.

반면, 내부 반복자는 **컬렉션 내부에서 요소들을 반복** 하고, 개발자는  **요소 당 처리해야 할 코드만 제공하는 코드 패턴** 을 말한다.
 
> 내부 반복자의 이점
 1. 컬렉션 내부에서 어떻게 요소를 반복시킬 것인가는 컬렉션에게 맡기고, 개발자는 요소 처리 코드에만 집중할 수 있다.
 2. 내부반복자는 요소들의 반복 순서를 변경하거나 멀티코어 CPU를 최대한 활용하기 위해 병렬작업을 지원하기 때문에 효율적으로 요소 반복이 가능하다.

또, 이터레이터는 컬렉션 요소를 가져와서 처리하는 것까지 모두 개발자가 신경쓰지만
스트림은 람다식으로 요소처리내용만 전달하고, 반복은 컬렉션 내부에서 일어난다. 
 -> 코드가 간결해지고, 요소들의 병렬처리가 컬렉션 내부에서 처리되므로 일석이조

> 병렬처리가 뭐냐면
  - 한 가지 작업을 서브 작업으로 나눠
  - 서브 작업들은 분리된 스레드에서 병렬적으로 처리
  - 런타임 시 하나의 작업을 서브작업으로 자동으로 나눔
  - 서브 작업 결과를 자동으로 결합하여 최종 결과물 생성
  

3. 스트림은 중간 처리와 최종 처리를 할 수 있다
   - 중간처리: 매핑, 필터링, 정렬
   - 최종처리: 반복, 카운팅, 평균, 총합 등 집계처리수행
  eg. double avg = studentList.stream().mapToInt(Student :: getScore) //메소드 참조.. 제네릭인가 람다에 있는 내용 다시 봐야함


## 16.2 스트림의 종류

## 16.3 스트림 파이프라인

## 16.4 필터링

## 16.5 매핑

## 16.6 정렬

## 16.7 루핑

## 16.8 매칭

## 16.9 기본 집계

## 16.10 커스텀 집계

## 16.11 수집

## 16.12 병렬 처리



















